<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participants - Kitala</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Work Sans', 'sans-serif'],
                        outfit: ['Outfit', 'sans-serif']
                    },
                    colors: {
                        primary: '#4F39F6',
                        'primary-hover': '#3d2cdb',
                        sidebar: '#1E1B4B',
                        'sidebar-active': '#4F39F6',
                        'kitala-bg': '#F8FAFC',
                        'text-dark': '#0F172B',
                        'text-gray': '#62748e',
                        'text-gray-light': '#90A1B9',
                    },
                    boxShadow: {
                        'modal': '0px 10px 15px -3px rgba(0,0,0,0.1), 0px 4px 6px -4px rgba(0,0,0,0.1)',
                        'card': '0px 1px 3px 0px rgba(0, 0, 0, 0.10), 0px 1px 2px -1px rgba(0, 0, 0, 0.10)',
                        'chip': '0px 1px 2px 0px rgba(0,0,0,0.05)'
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .sidebar-gradient { background: linear-gradient(180deg, #2E236C 0%, #17123A 100%); }
        .checkbox-custom {
            appearance: none;
            background-color: #fff;
            margin: 0;
            font: inherit;
            color: currentColor;
            width: 18px;
            height: 18px;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            display: grid;
            place-content: center;
            cursor: pointer;
        }
        .checkbox-custom::before {
            content: "";
            width: 10px;
            height: 10px;
            transform: scale(0);
            transition: 120ms transform ease-in-out;
            box-shadow: inset 1em 1em #4F39F6;
            background-color: #4F39F6;
            transform-origin: center;
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }
        .checkbox-custom:checked {
            border-color: #4F39F6;
        }
        .checkbox-custom:checked::before {
            transform: scale(1);
        }
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 200ms, transform 200ms; }
        .modal-exit { opacity: 1; transform: scale(1); }
        .modal-exit-active { opacity: 0; transform: scale(0.95); transition: opacity 200ms, transform 200ms; }
    </style>
</head>
<body class="bg-kitala-bg font-sans text-text-dark min-h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-[260px] sidebar-gradient flex-shrink-0 flex flex-col h-screen fixed left-0 top-0 z-30">
        <div class="h-16 flex items-center px-6 shrink-0 mt-2">
           <span class="text-white text-2xl font-bold tracking-tight">kitala</span>
        </div>
        <a href="#" class="flex items-center gap-2 px-6 py-3 text-white/70 hover:text-white transition-colors group">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:-translate-x-0.5 transition-transform"><path d="M15 8H1M8 15L1 8L8 1"/></svg>
            <span class="text-sm font-medium">Back to Projects</span>
        </a>
        <div class="px-4 py-2">
            <div class="bg-white/10 rounded-xl p-3 border border-white/10 flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg bg-indigo-500/30 flex items-center justify-center border border-white/20 shrink-0">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-white text-xs font-bold leading-tight truncate">Testing Voice LLM</p>
                    <p class="text-white/60 text-[10px] truncate">for Health in Rwanda</p>
                </div>
            </div>
        </div>
        <nav class="flex-1 px-3 py-4 space-y-1 overflow-y-auto">
            <a href="project-detail-task-allocation.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition-colors text-sm font-medium">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                Task Allocation
            </a>
            <a href="project-detail-data-quality.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition-colors text-sm font-medium">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                Data Quality
            </a>
            <a href="project-detail-research-analytics.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition-colors text-sm font-medium">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 20V10"></path><path d="M12 20V4"></path><path d="M6 20v-6"></path></svg>
                Research Analytics
            </a>
            <a href="project-detail-participants.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary text-white text-sm font-medium shadow-sm">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                Participants
            </a>
             <a href="project-detail-payments.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition-colors text-sm font-medium">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="5" width="20" height="14" rx="2"></rect><line x1="2" y1="10" x2="22" y2="10"></line></svg>
                Payments
            </a>
            <a href="project-detail-project-settings.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition-colors text-sm font-medium mt-auto">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0 .73 2.73l.22.38a2 2 0 0 0-2.73-.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                Project Settings
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col min-w-0 lg:ml-[260px] transition-all duration-300">
        <!-- Header -->
        <header class="h-14 flex items-center justify-between px-8 sticky top-0 z-10 shrink-0 bg-kitala-bg">
            <div class="flex items-center gap-2">
                 <button class="lg:hidden p-2 text-text-gray mr-2">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                 </button>
                 <div class="flex items-center gap-2 text-sm text-text-gray">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="12" height="12" rx="2"/><path d="M5 2V14"/></svg>
                    <span class="text-[#71717b]">Projects</span>
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    <span class="text-text-dark font-medium">Testing Voice LLM for Health in Rwanda</span>
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto px-8 pb-8 pt-2 space-y-6">
            <!-- Page Header -->
            <div class="flex flex-col gap-4">
                <div class="flex justify-between items-start">
                    <div>
                        <h1 class="text-[30px] font-bold text-text-dark tracking-tight">Participants</h1>
                        <p class="text-text-gray mt-1 text-base">Manage your team and its workload</p>
                    </div>
                    
                    <!-- Stats Cards -->
                    <div class="flex gap-4">
                        <div class="bg-white px-5 py-3 rounded-[12px] border border-slate-200 shadow-sm flex flex-col min-w-[140px]">
                            <span class="text-[10px] font-bold text-[#90a1b9] uppercase tracking-wider mb-0.5">Recruited</span>
                            <div class="flex items-baseline gap-2">
                                <span class="text-[20px] font-bold text-[#0f172b]">100</span>
                                <span class="text-[11px] text-[#62748e] font-medium">Amazing people</span>
                            </div>
                        </div>
                        <div class="bg-white px-5 py-3 rounded-[12px] border border-slate-200 shadow-sm flex flex-col min-w-[140px]">
                            <span class="text-[10px] font-bold text-[#90a1b9] uppercase tracking-wider mb-0.5">Assigned Task</span>
                            <div class="flex items-baseline gap-2">
                                <span class="text-[20px] font-bold text-[#16a34a]">90%</span>
                                <span class="text-[11px] text-[#62748e] font-medium">90 / 100</span>
                            </div>
                        </div>
                        <div class="bg-white px-5 py-3 rounded-[12px] border border-slate-200 shadow-sm flex flex-col min-w-[140px]">
                            <span class="text-[10px] font-bold text-[#90a1b9] uppercase tracking-wider mb-0.5">Started Work</span>
                            <div class="flex items-baseline gap-2">
                                <span class="text-[20px] font-bold text-[#ef4444]">33%</span>
                                <span class="text-[11px] text-[#62748e] font-medium">30 / 90</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Card -->
            <div class="bg-white rounded-[14px] border border-[#e2e8f0] shadow-sm flex flex-col overflow-hidden min-h-[600px]">
                
                <!-- Toolbar -->
                <div class="p-6 border-b border-[#e2e8f0] flex flex-col gap-6">
                    <!-- Top Toolbar -->
                    <div class="flex flex-col sm:flex-row justify-between gap-4 items-center">
                        <h2 class="text-[18px] font-bold text-[#62748e]">Project Team</h2>
                        
                        <div class="flex items-center gap-3 w-full sm:w-auto">
                            <div class="relative flex-1 sm:flex-none">
                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#90A1B9]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                                <input 
                                    type="text"
                                    placeholder="Search participants..." 
                                    class="pl-9 h-10 w-full sm:w-[280px] bg-white border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary transition-colors"
                                >
                            </div>
                            
                            <button class="h-10 px-4 flex items-center gap-2 border border-slate-200 rounded-[8px] text-[#45556c] text-sm font-bold hover:bg-slate-50 transition-colors bg-white">
                                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                                Filters
                            </button>
                            
                            <!-- Assign Segment Button (Initially Disabled) -->
                            <button id="btn-assign-segment" onclick="openModal('assign-segment-modal')" class="h-10 px-4 flex items-center gap-2 bg-[#f8fafc] text-[#94a3b8] border border-slate-200 font-bold rounded-[8px] text-sm transition-all cursor-not-allowed" disabled>
                                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                Assign Segment
                            </button>

                            <button onclick="openModal('add-participant-modal')" class="h-10 px-4 flex items-center gap-2 bg-[#4f39f6] text-white hover:bg-[#3d2cdb] font-bold rounded-[8px] text-sm transition-all shadow-sm">
                                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                                Add Participant
                            </button>
                        </div>
                    </div>

                    <!-- Filter Chips -->
                    <div class="flex items-center gap-3">
                        <span class="text-[12px] font-bold text-[#0f172b] uppercase tracking-wide">Filter BY:</span>
                        
                        <!-- Segments -->
                        <div class="flex items-center h-8 px-3 bg-white border border-[#e2e8f0] rounded-[6px] shadow-chip cursor-pointer hover:border-primary transition-colors gap-2">
                             <svg class="w-3.5 h-3.5 text-[#94a3b8]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                            <span class="text-[12px] text-[#64748b]">Segments: <strong class="text-[#0f172b]">Rural, Urban</strong></span>
                            <button class="text-[#94a3b8] hover:text-[#0f172b]"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                        </div>

                         <!-- Age -->
                         <div class="flex items-center h-8 px-3 bg-white border border-[#e2e8f0] rounded-[6px] shadow-chip cursor-pointer hover:border-primary transition-colors gap-2">
                            <svg class="w-3.5 h-3.5 text-[#94a3b8]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                           <span class="text-[12px] text-[#64748b]">Age: <strong class="text-[#0f172b]">Any</strong></span>
                           <button class="text-[#94a3b8] hover:text-[#0f172b]"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                       </div>

                        <!-- Country -->
                        <div class="flex items-center h-8 px-3 bg-white border border-[#e2e8f0] rounded-[6px] shadow-chip cursor-pointer hover:border-primary transition-colors gap-2">
                             <svg class="w-3.5 h-3.5 text-[#94a3b8]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                            <span class="text-[12px] text-[#64748b]">Country: <strong class="text-[#0f172b]">Any</strong></span>
                            <button class="text-[#94a3b8] hover:text-[#0f172b]"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                        </div>

                         <!-- Language -->
                         <div class="flex items-center h-8 px-3 bg-white border border-[#e2e8f0] rounded-[6px] shadow-chip cursor-pointer hover:border-primary transition-colors gap-2">
                            <svg class="w-3.5 h-3.5 text-[#94a3b8]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                           <span class="text-[12px] text-[#64748b]">Language: <strong class="text-[#0f172b]">Any</strong></span>
                           <button class="text-[#94a3b8] hover:text-[#0f172b]"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                       </div>

                       <button class="flex items-center gap-1 text-[#4f39f6] text-[13px] font-bold hover:underline ml-2">
                           <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                           Add Filter
                       </button>
                    </div>
                </div>

                <!-- Table Content -->
                <div class="w-full overflow-x-auto">
                    <div class="min-w-[1000px]">
                        <!-- Table Header -->
                        <div class="grid grid-cols-[48px_250px_200px_1.5fr_140px_160px_140px] bg-[#f8fafc] border-b border-slate-100 text-[11px] font-bold text-[#62748e] uppercase tracking-[0.6px]">
                            <div class="flex items-center justify-center py-4">
                                <input type="checkbox" class="checkbox-custom" onclick="toggleAllCheckboxes(this)">
                            </div>
                            <div class="flex items-center px-4 py-4">Name & Last Active</div>
                            <div class="flex items-center px-4 py-4">Sessions Completed</div>
                            <div class="flex items-center px-4 py-4">Segment</div>
                            <div class="flex items-center px-4 py-4">QA Status</div>
                            <div class="flex items-center px-4 py-4">Payment Status</div>
                            <div class="flex items-center px-4 py-4">Rating</div>
                        </div>

                        <!-- Table Body -->
                        <div class="divide-y divide-slate-100 bg-white text-[#0F172B]">
                            <!-- Row 1: Sarah Ndiaye -->
                            <div class="grid grid-cols-[48px_250px_200px_1.5fr_140px_160px_140px] hover:bg-slate-50 transition-colors group h-[72px] items-center">
                                <div class="flex items-center justify-center h-full">
                                    <input type="checkbox" class="checkbox-custom row-checkbox" onclick="updateAssignButton()">
                                </div>
                                <div class="flex items-center px-4 h-full gap-3">
                                    <div class="w-9 h-9 rounded-full bg-[#e0e7ff] text-[#4f39f6] flex items-center justify-center text-xs font-bold">SN</div>
                                    <div>
                                        <div class="text-sm font-bold text-[#0f172b]">Sarah Ndiaye</div>
                                        <div class="text-[11px] text-[#62748e]">1 day ago</div>
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 px-2 py-0.5 rounded-[4px] bg-[#eef2ff] text-[#4f39f6] text-[12px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#4f39f6]"></div>
                                        12 / 25
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full text-[14px] font-medium text-[#0f172b]">Rural R2.1</div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full border border-[#ffedd5] bg-[#fff7ed] text-[#c2410c] text-[11px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#f97316]"></div>
                                        Ongoing
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 text-[#4f39f6] text-[12px] font-bold">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>
                                        Requested
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1 text-[14px] font-bold text-[#0f172b]">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24" stroke="#fbbf24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                        4.5
                                    </div>
                                </div>
                            </div>

                            <!-- Row 2: Jean-Claude -->
                            <div class="grid grid-cols-[48px_250px_200px_1.5fr_140px_160px_140px] hover:bg-slate-50 transition-colors group h-[72px] items-center">
                                <div class="flex items-center justify-center h-full">
                                    <input type="checkbox" class="checkbox-custom row-checkbox" onclick="updateAssignButton()">
                                </div>
                                <div class="flex items-center px-4 h-full gap-3">
                                    <div class="w-9 h-9 rounded-full bg-[#e0f2fe] text-[#0284c7] flex items-center justify-center text-xs font-bold">JC</div>
                                    <div>
                                        <div class="text-sm font-bold text-[#0f172b]">Jean-Claude</div>
                                        <div class="text-[11px] text-[#62748e]">3 days ago</div>
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 px-2 py-0.5 rounded-[4px] bg-[#eef2ff] text-[#4f39f6] text-[12px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#4f39f6]"></div>
                                        8 / 25
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full text-[14px] font-medium text-[#0f172b]">Chronic (TB)</div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full border border-[#e2e8f0] bg-[#f1f5f9] text-[#94a3b8] text-[11px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#94a3b8]"></div>
                                        Not Started
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 text-[#94a3b8] text-[12px] font-bold">
                                        <div class="w-3.5 h-3.5 rounded-full border-2 border-[#cbd5e1]"></div>
                                        Not Requested
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1 text-[14px] font-bold text-[#0f172b]">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24" stroke="#fbbf24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                        4.6
                                    </div>
                                </div>
                            </div>

                            <!-- Row 3: Awa S. -->
                            <div class="grid grid-cols-[48px_250px_200px_1.5fr_140px_160px_140px] hover:bg-slate-50 transition-colors group h-[72px] items-center relative">
                                <div class="flex items-center justify-center h-full">
                                    <input type="checkbox" class="checkbox-custom row-checkbox" onclick="updateAssignButton()">
                                </div>
                                <div class="flex items-center px-4 h-full gap-3">
                                    <div class="w-9 h-9 rounded-full bg-[#f1f5f9] text-[#64748b] flex items-center justify-center text-xs font-bold">AS</div>
                                    <div>
                                        <div class="text-sm font-bold text-[#0f172b]">Awa S.</div>
                                        <div class="text-[11px] text-[#62748e]">Not active yet</div>
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <span class="text-[12px] italic text-[#94a3b8]">None Assigned</span>
                                </div>
                                <div class="flex items-center px-4 h-full text-[12px] italic text-[#94a3b8]">None Assigned</div>
                                <div class="flex items-center px-4 h-full">
                                   <span class="text-[12px] italic text-[#94a3b8]">NA</span>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 text-[#94a3b8] text-[12px] font-bold">
                                        <div class="w-3.5 h-3.5 rounded-full border-2 border-[#cbd5e1]"></div>
                                        Not Requested
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full justify-between pr-6 relative">
                                    <div class="flex items-center gap-1 text-[14px] font-bold text-[#94a3b8]">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24" stroke="#fbbf24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                        0.0
                                    </div>
                                    
                                    <!-- See Details Button (Visible on hover or persistent as per design) -->
                                    <button onclick="openPanel('details-panel')" class="absolute right-4 opacity-0 group-hover:opacity-100 transition-opacity h-8 px-3 bg-white border border-[#e2e8f0] text-[#4f39f6] text-[11px] font-bold rounded-[6px] shadow-sm hover:bg-[#eef2ff] hover:border-[#c6d2ff]">
                                        See Details
                                    </button>
                                </div>
                            </div>

                            <!-- Row 4: Emmanuel R. -->
                            <div class="grid grid-cols-[48px_250px_200px_1.5fr_140px_160px_140px] hover:bg-slate-50 transition-colors group h-[72px] items-center">
                                <div class="flex items-center justify-center h-full">
                                    <input type="checkbox" class="checkbox-custom row-checkbox" onclick="updateAssignButton()">
                                </div>
                                <div class="flex items-center px-4 h-full gap-3">
                                    <div class="w-9 h-9 rounded-full bg-[#f3e8ff] text-[#9333ea] flex items-center justify-center text-xs font-bold">ER</div>
                                    <div>
                                        <div class="text-sm font-bold text-[#0f172b]">Emmanuel R.</div>
                                        <div class="text-[11px] text-[#62748e]">3 days ago</div>
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 px-2 py-0.5 rounded-[4px] bg-[#eef2ff] text-[#4f39f6] text-[12px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#4f39f6]"></div>
                                        22 / 25
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full text-[14px] font-medium text-[#0f172b]">Father</div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full border border-[#dcfce7] bg-[#f0fdf4] text-[#16a34a] text-[11px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#16a34a]"></div>
                                        Completed
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 text-[#16a34a] text-[12px] font-bold">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                        Sent
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1 text-[14px] font-bold text-[#0f172b]">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24" stroke="#fbbf24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                        4.3
                                    </div>
                                </div>
                            </div>

                            <!-- Row 5: Sarah M. -->
                            <div class="grid grid-cols-[48px_250px_200px_1.5fr_140px_160px_140px] hover:bg-slate-50 transition-colors group h-[72px] items-center">
                                <div class="flex items-center justify-center h-full">
                                    <input type="checkbox" class="checkbox-custom row-checkbox" onclick="updateAssignButton()">
                                </div>
                                <div class="flex items-center px-4 h-full gap-3">
                                    <div class="w-9 h-9 rounded-full bg-[#fce7f3] text-[#db2777] flex items-center justify-center text-xs font-bold">SM</div>
                                    <div>
                                        <div class="text-sm font-bold text-[#0f172b]">Sarah M.</div>
                                        <div class="text-[11px] text-[#62748e]">3 days ago</div>
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 px-2 py-0.5 rounded-[4px] bg-[#eef2ff] text-[#4f39f6] text-[12px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#4f39f6]"></div>
                                        15 / 30
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full text-[14px] font-medium text-[#0f172b]">Health Worker</div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full border border-[#ffedd5] bg-[#fff7ed] text-[#c2410c] text-[11px] font-bold">
                                        <div class="w-1.5 h-1.5 rounded-full bg-[#f97316]"></div>
                                        Ongoing
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-2 text-[#4f39f6] text-[12px] font-bold">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>
                                        Requested
                                    </div>
                                </div>
                                <div class="flex items-center px-4 h-full">
                                    <div class="flex items-center gap-1 text-[14px] font-bold text-[#0f172b]">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24" stroke="#fbbf24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                        4.2
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black/50 z-40 hidden opacity-0 transition-opacity duration-200 backdrop-blur-sm" onclick="closeAll()"></div>

    <!-- ASSIGN SEGMENT MODAL -->
    <div id="assign-segment-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center pointer-events-none">
        <div class="bg-white rounded-[16px] shadow-2xl w-[600px] flex flex-col pointer-events-auto transform scale-95 opacity-0 transition-all duration-200" id="assign-segment-modal-content">
            <!-- Header -->
            <div class="p-6 border-b border-slate-100 flex justify-between items-start">
                <div>
                    <h3 class="text-[20px] font-bold text-[#0f172b]">Assign Segments</h3>
                    <p class="text-[14px] text-slate-500 mt-1">Regroup your participants to facilitate task allocation</p>
                </div>
                <button onclick="closeAll()" class="text-slate-400 hover:text-slate-600">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>

            <!-- Content -->
            <div class="p-6">
                <p class="text-[14px] text-[#4f39f6] font-bold mb-4">12 selected participants</p>
                <p class="text-[14px] text-[#64748b] mb-3">Choose one or more segments:</p>

                <div class="space-y-3">
                    <!-- Option 1 -->
                    <label class="flex items-start gap-4 p-4 border-2 border-[#4f39f6] rounded-[12px] bg-[#eef2ff] cursor-pointer transition-colors">
                        <div class="mt-0.5">
                            <input type="checkbox" checked class="w-5 h-5 accent-[#4f39f6] rounded cursor-pointer">
                        </div>
                        <div>
                            <div class="font-bold text-[#0f172b] text-[14px]">Rural R2.1</div>
                            <div class="text-[12px] text-[#64748b] mt-0.5">Women, Rural, Senegal, Mbour, Age 18-25, Wolof</div>
                        </div>
                    </label>

                    <!-- Option 2 -->
                    <label class="flex items-start gap-4 p-4 border border-slate-200 rounded-[12px] hover:bg-slate-50 cursor-pointer transition-colors">
                        <div class="mt-0.5">
                            <input type="checkbox" class="w-5 h-5 border-slate-300 rounded cursor-pointer">
                        </div>
                        <div>
                            <div class="font-bold text-[#0f172b] text-[14px]">Urban R2.3</div>
                            <div class="text-[12px] text-[#64748b] mt-0.5">Women, Urban, Senegal, Dakar, Age 18-25, Wolof, Sereer</div>
                        </div>
                    </label>

                    <!-- Option 3 -->
                    <label class="flex items-start gap-4 p-4 border border-slate-200 rounded-[12px] hover:bg-slate-50 cursor-pointer transition-colors">
                        <div class="mt-0.5">
                            <input type="checkbox" class="w-5 h-5 border-slate-300 rounded cursor-pointer">
                        </div>
                        <div>
                            <div class="font-bold text-[#0f172b] text-[14px]">Urban R2.1</div>
                            <div class="text-[12px] text-[#64748b] mt-0.5">Men, Urban, Senegal, Dakar, Age 18-25, Wolof, Pulaar, French</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Footer -->
            <div class="p-6 pt-2 flex justify-between gap-3">
                <button onclick="closeAll()" class="px-6 h-11 border border-slate-200 text-slate-600 font-bold rounded-[8px] hover:bg-slate-50 text-[14px]">Cancel</button>
                <button onclick="closeAll()" class="flex-1 h-11 bg-[#4f39f6] text-white font-bold rounded-[8px] hover:bg-[#3d2cdb] text-[14px]">Assign to Selected Segments</button>
            </div>
        </div>
    </div>

    <!-- ADD PARTICIPANT MODAL -->
    <div id="add-participant-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center pointer-events-none">
        <div class="bg-white rounded-[16px] shadow-2xl w-[680px] flex flex-col pointer-events-auto transform scale-95 opacity-0 transition-all duration-200" id="add-participant-modal-content">
            <!-- Header -->
            <div class="p-6 border-b border-slate-100 flex justify-between items-start">
                <div>
                    <h3 class="text-[20px] font-bold text-[#0f172b]">Add Participants</h3>
                    <p class="text-[14px] text-slate-500 mt-1">Invite new people to join the project.</p>
                </div>
                <button onclick="closeAll()" class="text-slate-400 hover:text-slate-600">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>

            <!-- Content -->
            <div class="p-8">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-[14px] font-bold text-[#0f172b]">Invite by email</label>
                    <span class="text-[12px] text-slate-400">Name is required for personalizing invites</span>
                </div>

                <div class="space-y-3 mb-4">
                    <!-- Row 1 -->
                    <div class="flex gap-3">
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <svg class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
                            </div>
                            <input type="email" placeholder="Email address" class="pl-10 h-10 w-full bg-[#f8fafc] border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary">
                        </div>
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <svg class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            </div>
                            <input type="text" placeholder="Full Name" class="pl-10 h-10 w-full bg-[#f8fafc] border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary">
                        </div>
                    </div>

                    <!-- Row 2 -->
                    <div class="flex gap-3">
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <svg class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
                            </div>
                            <input type="email" placeholder="Email address" class="pl-10 h-10 w-full bg-[#f8fafc] border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary">
                        </div>
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <svg class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            </div>
                            <input type="text" placeholder="Full Name" class="pl-10 h-10 w-full bg-[#f8fafc] border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary">
                        </div>
                    </div>

                    <!-- Row 3 -->
                    <div class="flex gap-3">
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <svg class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
                            </div>
                            <input type="email" placeholder="Email address" class="pl-10 h-10 w-full bg-[#f8fafc] border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary">
                        </div>
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <svg class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            </div>
                            <input type="text" placeholder="Full Name" class="pl-10 h-10 w-full bg-[#f8fafc] border border-slate-200 rounded-[8px] text-sm focus:outline-none focus:border-primary">
                        </div>
                        <button class="text-slate-400 hover:text-[#ef4444] transition-colors">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    </div>
                </div>

                <div class="flex justify-between items-center mb-8">
                     <button class="text-[#4f39f6] text-sm font-bold hover:underline flex items-center gap-1">
                        + Add another
                     </button>
                     <button class="bg-[#f8fafc] text-slate-300 font-bold px-4 py-2 rounded-[8px] text-sm cursor-not-allowed">Send Invites</button>
                </div>

                <div class="flex items-center gap-4 mb-4">
                    <div class="h-px bg-slate-200 flex-1"></div>
                    <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">OR UPLOAD FILE</span>
                    <div class="h-px bg-slate-200 flex-1"></div>
                </div>

                <div class="border-2 border-dashed border-[#e2e8f0] rounded-[16px] p-8 flex flex-col items-center justify-center text-center hover:border-[#4f39f6] hover:bg-[#eef2ff] transition-all cursor-pointer group">
                    <div class="w-10 h-10 bg-[#eef2ff] rounded-full flex items-center justify-center text-[#4f39f6] mb-3 group-hover:bg-white group-hover:scale-110 transition-transform">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                    </div>
                    <h4 class="text-[#0f172b] font-bold text-[14px] mb-1">Upload CSV or JSON</h4>
                    <p class="text-[12px] text-slate-500 mb-4 max-w-[280px]">Fill the template and upload it to add an entire team in 1 clic!</p>
                    <div class="flex gap-2">
                        <button class="px-4 py-2 bg-white border border-slate-200 rounded-[8px] text-xs font-bold text-slate-700 shadow-sm hover:bg-slate-50">Choose File</button>
                        <button class="px-4 py-2 text-[#4f39f6] text-xs font-bold hover:underline flex items-center gap-1">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            Template
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DETAILS SIDE PANEL (Placeholder based on other pages) -->
    <div id="details-panel" class="fixed inset-y-0 right-0 z-50 w-[450px] bg-white shadow-2xl transform translate-x-full transition-transform duration-300 flex flex-col">
        <!-- Panel Header -->
        <div class="px-6 py-5 border-b border-slate-100 flex items-start justify-between bg-white shrink-0">
             <div>
                <h2 class="text-[20px] font-bold text-[#0F172B]">Awa S.</h2>
                <div class="flex items-center gap-2 mt-1">
                    <span class="text-[#62748e] text-[12px]">Participant Details</span>
                </div>
             </div>
             <button onclick="closeAll()" class="p-1 hover:bg-slate-100 rounded-full transition-colors">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
             </button>
        </div>
        <div class="flex-1 p-6 flex items-center justify-center text-slate-400">
            Details Content Placeholder
        </div>
    </div>

    <script>
        function openModal(id) {
            const modal = document.getElementById(id);
            const content = document.getElementById(id + '-content');
            const overlay = document.getElementById('overlay');
            
            modal.classList.remove('hidden');
            overlay.classList.remove('hidden');
            void overlay.offsetWidth; // Trigger reflow
            
            overlay.classList.remove('opacity-0');
            content.classList.remove('scale-95', 'opacity-0');
            content.classList.add('scale-100', 'opacity-100');
            
            document.body.style.overflow = 'hidden';
        }

        function openPanel(id) {
            const panel = document.getElementById(id);
            const overlay = document.getElementById('overlay');

            overlay.classList.remove('hidden');
            void overlay.offsetWidth;
            overlay.classList.remove('opacity-0');

            panel.classList.remove('translate-x-full');
            document.body.style.overflow = 'hidden';
        }

        function closeAll() {
            const overlay = document.getElementById('overlay');
            const modalAssign = document.getElementById('assign-segment-modal');
            const modalAssignContent = document.getElementById('assign-segment-modal-content');
            const modalAdd = document.getElementById('add-participant-modal');
            const modalAddContent = document.getElementById('add-participant-modal-content');
            const panel = document.getElementById('details-panel');
            
            // Close Assign Modal
            if (modalAssignContent && !modalAssign.classList.contains('hidden')) {
                modalAssignContent.classList.remove('scale-100', 'opacity-100');
                modalAssignContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => { modalAssign.classList.add('hidden'); }, 200);
            }

            // Close Add Modal
            if (modalAddContent && !modalAdd.classList.contains('hidden')) {
                modalAddContent.classList.remove('scale-100', 'opacity-100');
                modalAddContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => { modalAdd.classList.add('hidden'); }, 200);
            }

            // Close Panel
            if (panel) {
                panel.classList.add('translate-x-full');
            }
            
            overlay.classList.add('opacity-0');
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 300);
            
            document.body.style.overflow = '';
        }

        function toggleAllCheckboxes(source) {
            const checkboxes = document.querySelectorAll('.row-checkbox');
            checkboxes.forEach(cb => cb.checked = source.checked);
            updateAssignButton();
        }

        function updateAssignButton() {
            const checkedCount = document.querySelectorAll('.row-checkbox:checked').length;
            const btn = document.getElementById('btn-assign-segment');
            
            if (checkedCount > 0) {
                btn.removeAttribute('disabled');
                btn.classList.remove('bg-[#f8fafc]', 'text-[#94a3b8]', 'cursor-not-allowed');
                btn.classList.add('bg-[#eef2ff]', 'text-[#4f39f6]', 'hover:bg-[#e0e7ff]', 'border-[#c6d2ff]', 'cursor-pointer');
            } else {
                btn.setAttribute('disabled', 'true');
                btn.classList.add('bg-[#f8fafc]', 'text-[#94a3b8]', 'cursor-not-allowed');
                btn.classList.remove('bg-[#eef2ff]', 'text-[#4f39f6]', 'hover:bg-[#e0e7ff]', 'border-[#c6d2ff]', 'cursor-pointer');
            }
        }
    </script>
</body>
</html>
